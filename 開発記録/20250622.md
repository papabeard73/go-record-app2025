# 20250622 01

äº†è§£ã§ã™ï¼
ã“ã“ã‹ã‚‰ã¯ **ã€Œãƒ­ãƒ¼ã‚«ãƒ«ã« PostgreSQL ã‚’ç”¨æ„ â†’ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ â†’ Go ã‹ã‚‰æ¥ç¶šã€** ã¾ã§ã‚’ã€ã§ãã‚‹ã ã‘â€œã¤ã¾ãšããƒã‚¤ãƒ³ãƒˆâ€ç„¡ã—ã§é€²ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«æ‰‹é †åŒ–ã—ã¾ã™ã€‚

---

## 0. å…¨ä½“åƒï¼ˆã‚´ãƒ¼ãƒ«ï¼‰

1. **Docker ã§ PostgreSQL èµ·å‹•**ï¼ˆRender ã§ã‚‚åŒã˜ãƒãƒ¼ã‚¸ãƒ§ãƒªã‚’ä½¿ãˆã°æœ¬ç•ªã«ã‚‚è»¢ç”¨ã—ã‚„ã™ã„ï¼‰
2. **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ï¼ˆ`golang-migrate`ï¼‰ã‚’å°å…¥**
3. **æœ€åˆã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ**ï¼ˆ`users / goals / study_records`ï¼‰
4. **Go ã§ DB æ¥ç¶šã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ **
5. **é™çš„ slice â†’ DB ã‹ã‚‰å–å¾—** ã«ç½®ãæ›ãˆï¼ˆä¸€è¦§ãŒ DB ãƒ‡ãƒ¼ã‚¿ã§è¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸï¼‰

---

## 1. Docker ã§ PostgreSQL ã‚’ç«‹ã¦ã‚‹

> ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›´ä¸‹ã« `docker-compose.yml` ã‚’ç½®ãæ–¹æ³•ãŒæœ€ã‚‚ç°¡å˜ã§ã™ã€‚

```yaml
version: "3.9"
services:
  db:
    image: postgres:16
    environment:
      POSTGRES_USER: appuser
      POSTGRES_PASSWORD: apppass
      POSTGRES_DB: goalsdb
    ports:
      - "5432:5432"
    volumes:
      - db-data:/var/lib/postgresql/data
volumes:
  db-data:
```

```bash
docker compose up -d
```

* **ãƒ›ã‚¹ãƒˆå´ãƒãƒ¼ãƒˆ 5432** ã§ã¤ãªãŒã‚Šã¾ã™ã€‚
* ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼š`appuser` / ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼š`apppass` / DBï¼š`goalsdb`

---

## 2. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ã‚’å°å…¥ï¼ˆgolang-migrate æ¨å¥¨ï¼‰

```bash
# ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆGo 1.20 ä»¥é™ï¼‰
go install github.com/golang-migrate/migrate/v4/cmd/migrate@latest
```

* `migrate` ã‚³ãƒãƒ³ãƒ‰ãŒ `$GOPATH/bin` ã«å…¥ã‚‹ã®ã§ã€PATH ã‚’é€šã—ã¦ãŠãã¨ä¾¿åˆ©ã€‚

---

## 3. æœ€åˆã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ

```bash
mkdir -p db/migrations
migrate create -ext sql -dir db/migrations -seq create_tables
```

### ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«

```
db/migrations/
â””â”€â”€ 000001_create_tables.up.sql
â””â”€â”€ 000001_create_tables.down.sql
```

### `000001_create_tables.up.sql`

```sql
-- usersï¼ˆå°†æ¥ç”¨ï¼‰
CREATE TABLE IF NOT EXISTS users (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    email TEXT UNIQUE,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- goals
CREATE TABLE IF NOT EXISTS goals (
    id SERIAL PRIMARY KEY,
    user_id INT REFERENCES users(id),
    title TEXT NOT NULL,
    description TEXT,
    status TEXT NOT NULL,
    target_date DATE,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- study_records
CREATE TABLE IF NOT EXISTS study_records (
    id SERIAL PRIMARY KEY,
    goal_id INT REFERENCES goals(id) ON DELETE CASCADE,
    content TEXT,
    duration_minutes INT NOT NULL,
    recorded_at DATE DEFAULT CURRENT_DATE
);
```

### `000001_create_tables.down.sql`

```sql
DROP TABLE IF EXISTS study_records;
DROP TABLE IF EXISTS goals;
DROP TABLE IF EXISTS users;
```

### é©ç”¨ã‚³ãƒãƒ³ãƒ‰

```bash
migrate -database "postgres://appuser:apppass@localhost:5432/goalsdb?sslmode=disable" \
        -path db/migrations up
```

> **âœ”ï¸ `success` ãŒå‡ºã‚Œã° OK**ã€‚ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå‡ºæ¥ã¦ã„ã‚‹ã‹ psql ã‚„ GUI ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
>

> âœ… `migrate` ã®å‡ºåŠ›ã« `1/u create_tables` ã¨å‡ºã¦ã„ã‚‹ã®ã§ã€\*\*1å€‹ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆï¼‰\*\*ãŒæ­£å¸¸ã«é©ç”¨ã•ã‚ŒãŸã“ã¨ã‚’æ„å‘³ã—ã¦ã„ã¾ã™ã€‚
ã§ã¯ã€**PostgreSQLã«æ¥ç¶šã—ã¦æœ¬å½“ã«ãƒ†ãƒ¼ãƒ–ãƒ«ãŒã§ãã¦ã„ã‚‹ã‹ç¢ºèª**ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

---

## âœ… æ–¹æ³•1ï¼š`psql`ï¼ˆPostgreSQLã®CLIï¼‰ã§ç¢ºèª

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ï¼š

```bash
psql -U appuser -d goalsdb -h localhost -p 5432
```

* ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼š`appuser`
* ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åï¼š`goalsdb`
* ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼š`apppass`ï¼ˆå…¥åŠ›ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ï¼‰

**ãƒ­ã‚°ã‚¤ãƒ³å¾Œï¼šä»¥ä¸‹ã®SQLã§ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§ã‚’ç¢ºèª**

```sql
\dt
```

å‡ºåŠ›ä¾‹ï¼š

```
             List of relations
 Schema |     Name     | Type  |  Owner
--------+--------------+-------+----------
 public | goals        | table | appuser
 public | schema_migrations | table | appuser
```

* `goals`ï¼šè‡ªåˆ†ãŒä½œã£ãŸãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½œæˆã•ã‚ŒãŸã‚‚ã®ï¼‰
* `schema_migrations`ï¼š`migrate` ãŒç®¡ç†ç”¨ã«è‡ªå‹•ä½œæˆã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«

çµ‚äº†ã™ã‚‹ã«ã¯ï¼š
```
\q
```
---

## âœ… æ–¹æ³•2ï¼šGUIãƒ„ãƒ¼ãƒ«ã§ç¢ºèªï¼ˆPosticoã‚„TablePlusãªã©ï¼‰

PostgreSQLã®GUIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ãŠæŒã¡ãªã‚‰ã€ä»¥ä¸‹ã®æƒ…å ±ã§æ¥ç¶šã§ãã¾ã™ï¼š

| é …ç›®         | å€¤          |
| ------------ | ----------- |
| ãƒ›ã‚¹ãƒˆ       | `localhost` |
| ãƒãƒ¼ãƒˆ       | `5432`      |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼å   | `appuser`   |
| ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰   | `apppass`   |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | `goalsdb`   |

ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€**`goals` ãƒ†ãƒ¼ãƒ–ãƒ«ãŒã‚ã‚‹ã‹ã‚’æ¢ã—ã¦ãã ã•ã„ã€‚**

---

## â“è£œè¶³ï¼šãƒ†ãƒ¼ãƒ–ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã¨ã

* ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³SQLã« `CREATE TABLE goals` ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ
* ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œæ™‚ã®ã‚¨ãƒ©ãƒ¼ãŒãªã„ã‹ï¼Ÿ
* æ­£ã—ã„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ (`goalsdb`) ã«æ¥ç¶šã—ã¦ã„ã‚‹ã‹ï¼Ÿ

ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

---

å¿…è¦ãªã‚‰ã€`db/migrations/xxxx_create_tables.up.sql` ã®å†…å®¹ã‚‚ä¸€ç·’ã«ç¢ºèªã§ãã¾ã™ã®ã§ã€å†…å®¹ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ï¼


---

## 4. Go ã‹ã‚‰ DB ã«æ¥ç¶šã™ã‚‹

### 4-1. ãƒ‰ãƒ©ã‚¤ãƒã‚’è¿½åŠ ï¼ˆ`go-pg` ã§ã‚‚ `gorm` ã§ã‚‚å¯ã ãŒã€æœ€è»½é‡ã¯ `pgx + database/sql`ï¼‰

```bash
go get github.com/jackc/pgx/v5
```

### 4-2. `internal/db/db.go` ã‚’ä½œã‚‹ï¼ˆä¾‹ï¼‰

```go
package db

import (
	"database/sql"
	"fmt"
	"log"
	"os"

	_ "github.com/jackc/pgx/v5/stdlib"
)

func Open() *sql.DB {
	dsn := fmt.Sprintf("postgres://%s:%s@%s:%s/%s?sslmode=disable",
		getenv("DB_USER", "appuser"),
		getenv("DB_PASSWORD", "apppass"),
		getenv("DB_HOST", "localhost"),
		getenv("DB_PORT", "5432"),
		getenv("DB_NAME", "goalsdb"),
	)

	db, err := sql.Open("pgx", dsn)
	if err != nil {
		log.Fatal("DBæ¥ç¶šå¤±æ•—:", err)
	}
	if err := db.Ping(); err != nil {
		log.Fatal("DBç–é€šå¤±æ•—:", err)
	}
	return db
}

func getenv(k, def string) string {
	if v := os.Getenv(k); v != "" {
		return v
	}
	return def
}
```

### 4-3. main.go ã‚’ä¿®æ­£ã—ã¦ DB ã‹ã‚‰å–å¾—

```go
import (
    "database/sql"
    // ...
)

func main() {
    db := db.Open()          // â† å…ˆã»ã©ã®é–¢æ•°ã‚’å‘¼ã¶
    defer db.Close()

    // ç›®æ¨™ä¸€è¦§å–å¾—ã‚¯ã‚¨ãƒª
    rows, err := db.Query(`SELECT id, title, description, target_date, status FROM goals ORDER BY id`)
    if err != nil {
        log.Fatal("SELECTå¤±æ•—:", err)
    }
    defer rows.Close()

    var goals []Goal
    for rows.Next() {
        var g Goal
        if err := rows.Scan(&g.ID, &g.Title, &g.Description, &g.TargetDate, &g.Status); err != nil {
            log.Fatal(err)
        }
        goals = append(goals, g)
    }

    // ä»¥ä¸‹ã¯ä»Šã¾ã§ã¨åŒã˜: goals ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«æ¸¡ã™
}
```

> **âš ï¸ æœ€åˆã¯ãƒ†ãƒ¼ãƒ–ãƒ«ãŒç©ºãªã®ã§ã€æ‰‹å‹•ã§ `INSERT` ã—ã¦ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚**
>
> ã¯ã„ã€PostgreSQL ã® `psql` ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸçŠ¶æ…‹ã§ `INSERT` ã‚’å®Ÿè¡Œã™ã‚‹æ‰‹é †ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

---

### âœ… å‰æ

* `migrate` ã§ä½œæˆã•ã‚ŒãŸãƒ†ãƒ¼ãƒ–ãƒ«åãŒ `goals` ã§ã‚ã‚‹ã¨ã—ã¾ã™ï¼ˆå®Ÿéš›ã®ãƒ†ãƒ¼ãƒ–ãƒ«åã«åˆã‚ã›ã¦èª¿æ•´ã—ã¦ãã ã•ã„ï¼‰ã€‚
* ã‚«ãƒ©ãƒ ã¯ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã¨ä»®å®šã—ã¾ã™ï¼š

```sql
CREATE TABLE goals (
    id SERIAL PRIMARY KEY,
    user_id INTEGER,
    title TEXT NOT NULL,
    description TEXT,
    target_date DATE,
    status TEXT NOT NULL
);
```

---

### ğŸ§ª `psql` ã«ãƒ­ã‚°ã‚¤ãƒ³

```bash
psql -U appuser -d goalsdb -h localhost -p 5432
```

ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ±‚ã‚ã‚‰ã‚ŒãŸã‚‰ `apppass` ã‚’å…¥åŠ›ã€‚

---

### ğŸ“ ãƒ‡ãƒ¼ã‚¿ã‚’ `INSERT`

ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€æ¬¡ã®ã‚ˆã†ãª SQL ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

```sql
INSERT INTO goals (user_id, title, description, target_date, status)
VALUES (1, 'Goè¨€èªã§Webã‚¢ãƒ—ãƒªä½œæˆ', 'å­¦ç¿’ç®¡ç†ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹', '2025-08-15', 'ActiveGoals');
```

æˆåŠŸã™ã‚Œã°æ¬¡ã®ã‚ˆã†ãªè¡¨ç¤ºãŒå‡ºã¾ã™ï¼š

```
INSERT 0 1
```

---

### ğŸ“‹ ç¢ºèªã—ã¦ã¿ã‚‹

```sql
SELECT * FROM goals;
```

ä¾‹ï¼š

```
 id | user_id |         title         |        description        | target_date |    status
----+---------+-----------------------+---------------------------+--------------+--------------
  1 |       1 | Goè¨€èªã§Webã‚¢ãƒ—ãƒªä½œæˆ | å­¦ç¿’ç®¡ç†ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹  | 2025-08-15   | ActiveGoals
(1 row)
```

---

### ğŸšª çµ‚äº†ã™ã‚‹ã«ã¯

```sql
\q
```

---

å¿…è¦ã§ã‚ã‚Œã°ã€ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ Go ã® `main.go` ã‹ã‚‰å–å¾—ã—ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«è¡¨ç¤ºã™ã‚‹æ–¹æ³•ã‚‚ç¶šã‘ã¦æ¡ˆå†…ã§ãã¾ã™ï¼

ã“ã®ã‚¨ãƒ©ãƒ¼ã¯ã€`goals` ãƒ†ãƒ¼ãƒ–ãƒ«ã® `user_id` ã«å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ï¼ˆforeign key constraintï¼‰ãŒè¨­å®šã•ã‚Œã¦ãŠã‚Šã€å‚ç…§å…ˆã® `users` ãƒ†ãƒ¼ãƒ–ãƒ«ã« `id = 1` ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã¾ã å­˜åœ¨ã—ã¦ã„ãªã„ãŸã‚ã«ç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚

---

## âœ… è§£æ±ºæ‰‹é †

### ğŸ”§ Step 1: `users` ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¿½åŠ ã™ã‚‹

ã¾ãš `users` ãƒ†ãƒ¼ãƒ–ãƒ«ã«è©²å½“ã® `user_id` ã‚’æŒã¤ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚

```sql
INSERT INTO users (id, name, email)
VALUES (1, 'Eriko', 'eriko@example.com');
```

â€» `users` ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ§‹é€ ã«ã‚ˆã£ã¦ã€å¿…è¦ãªã‚«ãƒ©ãƒ ã‚’åˆã‚ã›ã¦ãã ã•ã„ã€‚ãŸã¨ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªæ§‹é€ ã ã¨ä»®å®šã—ã¾ã™ï¼š

```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    email TEXT NOT NULL UNIQUE
);
```

---

### ğŸ” Step 2: å†åº¦ `goals` ãƒ†ãƒ¼ãƒ–ãƒ«ã« INSERT

ä»Šåº¦ã¯ä»¥ä¸‹ã® SQL ã‚’å†å®Ÿè¡Œã—ã¦ã¿ã¦ãã ã•ã„ï¼š

```sql
INSERT INTO goals (user_id, title, description, target_date, status)
VALUES (1, 'Goè¨€èªã§Webã‚¢ãƒ—ãƒªä½œæˆ', 'å­¦ç¿’ç®¡ç†ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹', '2025-08-15', 'ActiveGoals');
```

---

### ğŸ§ª Step 3: ç¢ºèª

```sql
SELECT * FROM goals;
```

---

## ğŸ“ è£œè¶³

ã“ã®ã‚ˆã†ã«å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ï¼ˆå­˜åœ¨ã—ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç´ã¥ãã‚´ãƒ¼ãƒ«ãŒä½œã‚‰ã‚Œãªã„ã‚ˆã†ã«ï¼‰ã‚’å®ˆã‚‹ãŸã‚ã«ä¾¿åˆ©ã§ã™ãŒã€ãƒ†ã‚¹ãƒˆæ™‚ã¯ `users` ã«æœ€ä½é™ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã—ã¦ãŠãã“ã¨ãŒå¿…è¦ã§ã™ã€‚

å¿…è¦ã§ã‚ã‚Œã°ã€é–‹ç™ºç”¨ã®åˆæœŸãƒ‡ãƒ¼ã‚¿ï¼ˆ`seed`ï¼‰ã‚’ SQLãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ã¦ãŠãã®ã‚‚è‰¯ã„ç¿’æ…£ã§ã™ã€‚å¸Œæœ›ãŒã‚ã‚Œã°ãã®æ–¹æ³•ã‚‚ãŠä¼ãˆã§ãã¾ã™ã€‚

é–‹ç™ºæ™‚ã«æ¯å›æ‰‹å‹•ã§ `INSERT` ã‚’æ‰“ã¤ã®ã¯æ‰‹é–“ãªã®ã§ã€**åˆæœŸãƒ‡ãƒ¼ã‚¿ï¼ˆseedï¼‰ã‚’ SQL ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ã¦ç®¡ç†**ã™ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚ä»¥ä¸‹ã«ãã®æ–¹æ³•ã‚’è§£èª¬ã—ã¾ã™ã€‚

---

## âœ… æ‰‹é †ï¼šé–‹ç™ºç”¨ seed ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†æ–¹æ³•

### â‘  `db/seeds/dev_seed.sql` ã‚’ä½œæˆã™ã‚‹

ã¾ãšã€ä»¥ä¸‹ã®ã‚ˆã†ãª SQL ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚Šã¾ã™ï¼š

```
go-record-app2025/
â””â”€â”€ db/
    â””â”€â”€ seeds/
        â””â”€â”€ dev_seed.sql
```

#### `dev_seed.sql` ã®å†…å®¹ä¾‹ï¼š

```sql
-- users ãƒ†ãƒ¼ãƒ–ãƒ«ã®åˆæœŸãƒ‡ãƒ¼ã‚¿
INSERT INTO users (id, name, email) VALUES
  (1, 'Eriko', 'eriko@example.com'),
  (2, 'TestUser', 'test@example.com');

-- goals ãƒ†ãƒ¼ãƒ–ãƒ«ã®åˆæœŸãƒ‡ãƒ¼ã‚¿
INSERT INTO goals (user_id, title, description, target_date, status) VALUES
  (1, 'Goè¨€èªã§Webã‚¢ãƒ—ãƒªä½œæˆ', 'å­¦ç¿’ç®¡ç†ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹', '2025-08-15', 'ActiveGoals'),
  (1, 'TOEIC 900ç‚¹çªç ´', 'è‹±èªå­¦ç¿’ã‚’ç¶™ç¶šã—ã¦900ç‚¹ã‚’è¶…ãˆã‚‹', '2025-01-01', 'NotStarted'),
  (2, 'Reactã§ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªä½œæˆ', 'å°±è·æ´»å‹•ç”¨ã«Reactã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹', '2025-03-31', 'CompletedGoals');
```

---

### â‘¡ psql ã§ seed ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æµã—è¾¼ã‚€

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ SQL ã‚’æµã—è¾¼ã¿ã¾ã™ï¼š

```bash
psql -U appuser -d goalsdb -h localhost -p 5432 -f db/seeds/dev_seed.sql
```

â€»å¿…è¦ã«å¿œã˜ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚„ãƒãƒ¼ãƒˆç•ªå·ã¯ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ›  ãƒ’ãƒ³ãƒˆï¼šè‡ªå‹•ã§åˆæœŸåŒ–ã™ã‚‹æ–¹æ³•ã‚‚

é–‹ç™ºã®ãŸã³ã« seed ã‚’æµã™ã®ãŒé¢å€’ãªå ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ãªå·¥å¤«ã‚‚ã§ãã¾ã™ï¼š

* `Makefile` ã«ç™»éŒ²ã—ã¦ `make seed` ã§æµã›ã‚‹ã‚ˆã†ã«ã™ã‚‹
* Docker èµ·å‹•æ™‚ã« `init.sql` ã¨ã—ã¦è‡ªå‹•ã§æµã™
* Goå´ã« `seed.go` ã‚’ç”¨æ„ã—ã¦ API or CLI ã‹ã‚‰åˆæœŸåŒ–ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

---

## âœ… ã¾ã¨ã‚

| ã‚¹ãƒ†ãƒƒãƒ—  | å†…å®¹                                  |
| --------- | ------------------------------------- |
| 1         | `db/seeds/dev_seed.sql` ã‚’ä½œæˆ        |
| 2         | `psql -f` ã‚³ãƒãƒ³ãƒ‰ã§æµã—è¾¼ã‚€          |
| 3ï¼ˆä»»æ„ï¼‰ | Makefile ã‚„ Go ã‚³ãƒ¼ãƒ‰ã«çµ„ã¿è¾¼ã‚€ã¨ä¾¿åˆ© |

---

å¸Œæœ›ãŒã‚ã‚Œã°ã€Makefile ã‚„ Go ã® `seed.go` å®Ÿè£…ã‚µãƒ³ãƒ—ãƒ«ã‚‚æä¾›ã§ãã¾ã™ã€‚å¿…è¦ã§ã‚ã‚Œã°æ•™ãˆã¦ãã ã•ã„ï¼


---

## 5. ã†ã¾ãå‹•ã„ãŸã‚‰â€¦

1. **ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ INSERT** â†’ ç›®æ¨™ã‚’è¿½åŠ 
2. **ä¸€è¦§ã«å³æ™‚åæ˜ ** â†’ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒ DB ãƒ‡ãƒ¼ã‚¿ã§å‹•ã
3. ã•ã‚‰ã« **ãƒªãƒã‚¸ãƒˆãƒªå±¤**ï¼ˆ`internal/repository/goal_repo.go`ï¼‰ã‚’åˆ‡ã‚‹ã¨ãƒ†ã‚¹ãƒˆã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

---

### å‚è€ƒï¼šRender ã«æŒã£ã¦è¡Œãã¨ã

* Render ã® PostgreSQL ã‚¢ãƒ‰ã‚ªãƒ³ã‹ã€ç„¡æ–™ã®ã€ŒRender PostgreSQLã€ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¿½åŠ 
* æ¥ç¶šæ–‡å­—åˆ—ã¯ç’°å¢ƒå¤‰æ•° `DATABASE_URL` ã«å…¥ã‚‹ã®ã§ã€ä¸Šè¨˜ `getenv` ã§èª­ã‚€
* `migrate` ã¯ Render ã®â€œã‚¹ã‚¿ãƒ¼ãƒˆã‚³ãƒãƒ³ãƒ‰â€ã«çµ„ã¿è¾¼ã‚€ã‹ã€CI ã§å®Ÿè¡Œ

---

## âœ¨ ã¾ã¨ã‚

| ã‚¹ãƒ†ãƒƒãƒ—             | ã‚³ãƒãƒ³ãƒ‰ä¾‹                                                      |
| -------------------- | --------------------------------------------------------------- |
| DB èµ·å‹•              | `docker compose up -d`                                          |
| ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ | `migrate create -ext sql -dir db/migrations -seq create_tables` |
| ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨ | `migrate -database postgres://... up`                           |
| Go ãƒ‰ãƒ©ã‚¤ãƒè¿½åŠ       | `go get github.com/jackc/pgx/v5`                                |
| å‹•ä½œç¢ºèª             | `go run ./cmd/server` â†’ ãƒ–ãƒ©ã‚¦ã‚¶ã§ä¸€è¦§ãŒ DB ãƒ‡ãƒ¼ã‚¿ã«ãªã‚Œã°æˆåŠŸ  |

---

ã“ã“ã¾ã§ã§ãã‚Œã° **ã€Œé™çš„ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ â†’ DB æ°¸ç¶šãƒ‡ãƒ¼ã‚¿ã€** ã¸ã®ç§»è¡ŒãŒå®Œäº†ã§ã™ã€‚
æ¬¡ã¯ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ INSERT ã—ã¦ã¿ãŸã‚Šã€`StudyRecord` ã‚’è¿½åŠ ã—ã¦ã„ãæµã‚Œã¸é€²ã‚ã° OK ã§ã™ã€‚

ç–‘å•ç‚¹ãƒ»ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã¨ãã¯é æ…®ãªãèã„ã¦ãã ã•ã„ï¼

# 20250622 02

ã¨ã¦ã‚‚è‰¯ã„è¦–ç‚¹ã§ã™ï¼
ã€Œãƒªãƒã‚¸ãƒˆãƒªå±¤ã‚’åˆ‡ã‚‹ã¨ãƒ†ã‚¹ãƒˆã—ã‚„ã™ããªã‚‹ã€ã¨ã„ã†ã®ã¯ã€Goã®ã‚¢ãƒ—ãƒªè¨­è¨ˆã§éå¸¸ã«é‡è¦ãªè©±ã§ã™ã€‚

---

## âœ… çµè«–ï¼šãªãœã€Œãƒªãƒã‚¸ãƒˆãƒªå±¤ã€ãŒã‚ã‚‹ã¨ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„ã®ã‹ï¼Ÿ

> **ç†ç”±ï¼šãƒ‡ãƒ¼ã‚¿å–å¾—å‡¦ç†ã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§æŠ½è±¡åŒ–ã§ãã‚‹ã‹ã‚‰ã€‚**

ã“ã‚Œã«ã‚ˆã‚Šã€

* **DBæ“ä½œã®æœ¬ç‰©ã®å®Ÿè£…ï¼ˆPostgreSQLãªã©ï¼‰** ã¨
* **ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ¢ãƒƒã‚¯ï¼ˆæ“¬ä¼¼DBï¼‰** ã‚’ **ç°¡å˜ã«å…¥ã‚Œæ›¿ãˆã‚‰ã‚Œã‚‹** ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ’¡ ãƒªãƒã‚¸ãƒˆãƒªå±¤ãŒç„¡ã„çŠ¶æ…‹ã ã¨

ãŸã¨ãˆã°ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚„ã‚µãƒ¼ãƒ“ã‚¹å†…ã§ã€ã“ã‚“ãªãµã†ã«ç›´æ¥SQLã‚’ä½¿ã£ã¦ã„ãŸã¨ã—ã¾ã™ï¼š

```go
rows, err := db.Query("SELECT * FROM goals")
```

ã“ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã¯**DBãŒãªã„ã¨ãƒ†ã‚¹ãƒˆã§ãã¾ã›ã‚“**ã€‚
ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’ã—ã‚ˆã†ã¨æ€ã£ã¦ã‚‚ã€å®Ÿéš›ã«PostgreSQLãŒå¿…è¦ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

---

## âœ… ãƒªãƒã‚¸ãƒˆãƒªå±¤ã‚’åˆ‡ã‚‹ã¨ã¯ï¼Ÿï¼ˆæ§‹é€ ï¼‰

### 1. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®šç¾©

```go
// internal/repository/goal_repository.go

package repository

import "go-record-app2025/internal/model"

type GoalRepository interface {
	GetAllGoals() ([]model.Goal, error)
	GetGoalsByUserID(userID int) ([]model.Goal, error)
	// ä»–ã«ã‚‚ InsertGoal, UpdateGoal, DeleteGoal ãªã©ã‚’å®šç¾©å¯èƒ½
}
```

### 2. å®Ÿè£…ï¼ˆPostgreSQLãªã©ï¼‰

```go
// internal/repository/postgres_goal_repository.go

type postgresGoalRepo struct {
	DB *sql.DB
}

func (r *postgresGoalRepo) GetAllGoals() ([]model.Goal, error) {
	rows, err := r.DB.Query("SELECT id, title, target_date, status FROM goals")
	if err != nil {
		return nil, err
	}
	defer rows.Close()

	var goals []model.Goal
	for rows.Next() {
		var g model.Goal
		err := rows.Scan(&g.ID, &g.Title, &g.TargetDate, &g.Status)
		if err != nil {
			return nil, err
		}
		goals = append(goals, g)
	}
	return goals, nil
}

func NewPostgresGoalRepo(db *sql.DB) GoalRepository {
	return &postgresGoalRepo{DB: db}
}
```

---

## âœ… ãƒ†ã‚¹ãƒˆãŒã©ã†æ¥½ã«ãªã‚‹ã®ã‹ï¼Ÿ

ãƒ†ã‚¹ãƒˆã§ã¯ã€ã“ã® `GoalRepository` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½¿ã£ã¦**ãƒ¢ãƒƒã‚¯ã‚’å·®ã—è¾¼ã‚€**ã ã‘ï¼

```go
type mockGoalRepo struct{}

func (m *mockGoalRepo) GetAllGoals() ([]model.Goal, error) {
	return []model.Goal{
		{ID: 1, Title: "ãƒ¢ãƒƒã‚¯ã®ç›®æ¨™", Status: "NotStarted"},
	}, nil
}
```

ãã—ã¦ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆã§ã¯ã“ã‚Œã‚’ä½¿ã„ã¾ã™ã€‚

```go
repo := &mockGoalRepo{}
service := NewGoalService(repo) // â† æœ¬ç‰©ã®DBã˜ã‚ƒãªã„

goals, _ := service.GetAllGoals()
fmt.Println(goals[0].Title) // => ãƒ¢ãƒƒã‚¯ã®ç›®æ¨™
```

---

## âœ… ã¾ã¨ã‚

| é …ç›®                         | å†…å®¹                                                                                    |
| ---------------------------- | --------------------------------------------------------------------------------------- |
| **ãƒªãƒã‚¸ãƒˆãƒªå±¤**ã¨ã¯         | DBã‚¢ã‚¯ã‚»ã‚¹ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å¤–éƒ¨ã«åˆ‡ã‚Šå‡ºã—ã¦ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§æŠ½è±¡åŒ–ã™ã‚‹å±¤                  |
| **ãªãœãƒ†ã‚¹ãƒˆã—ã‚„ã™ããªã‚‹ã‹** | æœ¬ç‰©ã®DBã®ä»£ã‚ã‚Šã«ãƒ¢ãƒƒã‚¯ï¼ˆæ“¬ä¼¼å®Ÿè£…ï¼‰ã‚’æ¸¡ã›ã‚‹ã‹ã‚‰                                        |
| **å®Ÿè£…ã®åˆ†é›¢**               | PostgreSQLå°‚ç”¨ã®å®Ÿè£…ã¯ `postgres_goal_repository.go` ãªã©ã§æ›¸ãã€ãƒ†ã‚¹ãƒˆã§ã¯ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã† |

---

## âœ¨ è£œè¶³ï¼šä»Šå¾Œã®å¿œç”¨ã«ã‚‚ä¾¿åˆ©

* DBã‚’PostgreSQL â†’ MySQL ã«å¤‰ãˆãŸããªã£ã¦ã‚‚ã€ãƒªãƒã‚¸ãƒˆãƒªå±¤ã‚’å·®ã—æ›¿ãˆã‚‹ã ã‘ã§æ¸ˆã¿ã¾ã™ã€‚
* ã‚µãƒ¼ãƒ“ã‚¹å±¤ã®ãƒ†ã‚¹ãƒˆã§ã€DBã®èµ·å‹•ãƒ»åˆæœŸåŒ–ãŒä¸è¦ã«ãªã‚Šã¾ã™ã€‚

---

ã‚‚ã—ã”å¸Œæœ›ãŒã‚ã‚Œã°ã€å®Ÿéš›ã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã‚„ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ä¾‹ã‚‚ä¸€ç·’ã«æç¤ºã§ãã¾ã™ï¼

ã‚‚ã¡ã‚ã‚“ã§ã™ï¼
ä»¥ä¸‹ã«ã€Goã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«åŸºã¥ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã¨ã€ãƒªãƒã‚¸ãƒˆãƒªå±¤ã‚’æ´»ã‹ã—ãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ä¾‹ã‚’ã¾ã¨ã‚ã¾ã™ã€‚

---

## âœ… 1. æƒ³å®šãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
go-record-app2025/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ handler/               â† HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†
â”‚   â”‚   â””â”€â”€ goal_handler.go
â”‚   â”œâ”€â”€ repository/           â† DBã‚¢ã‚¯ã‚»ã‚¹ï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ + å®Ÿè£…ï¼‰
â”‚   â”‚   â”œâ”€â”€ goal_repository.go
â”‚   â”‚   â””â”€â”€ postgres_goal_repository.go
â”‚   â”œâ”€â”€ service/              â† ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ goal_service.go
â”‚   â”œâ”€â”€ model/                â† DBã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ or DTO
â”‚   â”‚   â””â”€â”€ goal.go
â”‚   â””â”€â”€ test/                 â† ãƒ†ã‚¹ãƒˆç”¨ãƒ¢ãƒƒã‚¯ã‚„ãƒ‡ãƒ¼ã‚¿
â”‚       â””â”€â”€ mock_goal_repository.go
â”œâ”€â”€ db/
â”‚   â””â”€â”€ migrations/
â”‚       â””â”€â”€ ...
â”‚   â””â”€â”€ seeds/
â”‚       â””â”€â”€ ...
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ goal_list.html
â”‚   â””â”€â”€ layout.html
```

---

## âœ… 2. å„ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒã‚¤ãƒ³ãƒˆ

### ğŸ“„ model/goal.go

```go
package model

type Goal struct {
	ID          int
	UserID      int
	Title       string
	Description string
	TargetDate  string
	Status      string // "NotStarted", "ActiveGoals", "CompletedGoals"
}
```

---

### ğŸ“„ repository/goal\_repository.goï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰

```go
package repository

import "go-record-app2025/internal/model"

type GoalRepository interface {
	GetAll() ([]model.Goal, error)
}
```

---

### ğŸ“„ repository/postgres\_goal\_repository.goï¼ˆå®Ÿè£…ï¼‰

```go
package repository

import (
	"database/sql"
	"go-record-app2025/internal/model"
)

type PostgresGoalRepository struct {
	DB *sql.DB
}

func NewPostgresGoalRepository(db *sql.DB) GoalRepository {
	return &PostgresGoalRepository{DB: db}
}

func (r *PostgresGoalRepository) GetAll() ([]model.Goal, error) {
	rows, err := r.DB.Query("SELECT id, user_id, title, description, target_date, status FROM goals")
	if err != nil {
		return nil, err
	}
	defer rows.Close()

	var goals []model.Goal
	for rows.Next() {
		var g model.Goal
		if err := rows.Scan(&g.ID, &g.UserID, &g.Title, &g.Description, &g.TargetDate, &g.Status); err != nil {
			return nil, err
		}
		goals = append(goals, g)
	}
	return goals, nil
}
```

---

### ğŸ“„ service/goal\_service.go

```go
package service

import (
	"go-record-app2025/internal/model"
	"go-record-app2025/internal/repository"
)

type GoalService struct {
	Repo repository.GoalRepository
}

func NewGoalService(repo repository.GoalRepository) *GoalService {
	return &GoalService{Repo: repo}
}

func (s *GoalService) GetGoals() ([]model.Goal, error) {
	return s.Repo.GetAll()
}
```

---

### ğŸ“„ handler/goal\_handler.go

```go
package handler

import (
	"html/template"
	"net/http"
	"go-record-app2025/internal/service"
)

type GoalHandler struct {
	GoalService *service.GoalService
}

func NewGoalHandler(goalService *service.GoalService) *GoalHandler {
	return &GoalHandler{GoalService: goalService}
}

func (h *GoalHandler) ListGoals(w http.ResponseWriter, r *http.Request) {
	goals, err := h.GoalService.GetGoals()
	if err != nil {
		http.Error(w, "ãƒ‡ãƒ¼ã‚¿å–å¾—å¤±æ•—", http.StatusInternalServerError)
		return
	}

	tmpl := template.Must(template.New("layout.html").Funcs(template.FuncMap{
		"eq": func(a, b string) bool { return a == b },
	}).ParseFiles("templates/layout.html", "templates/goal_list.html"))

	tmpl.ExecuteTemplate(w, "layout.html", goals)
}
```

---

### ğŸ“„ cmd/server/main.go

```go
package main

import (
	"database/sql"
	"log"
	"net/http"

	_ "github.com/lib/pq"
	"go-record-app2025/internal/handler"
	"go-record-app2025/internal/repository"
	"go-record-app2025/internal/service"
)

func main() {
	db, err := sql.Open("postgres", "postgresql://appuser:apppass@localhost:5432/goalsdb?sslmode=disable")
	if err != nil {
		log.Fatal("DBæ¥ç¶šå¤±æ•—:", err)
	}
	defer db.Close()

	repo := repository.NewPostgresGoalRepository(db)
	svc := service.NewGoalService(repo)
	h := handler.NewGoalHandler(svc)

	http.HandleFunc("/", h.ListGoals)
	http.Handle("/static/", http.StripPrefix("/static/", http.FileServer(http.Dir("static"))))

	log.Println("ğŸš€ http://localhost:8080")
	http.ListenAndServe(":8080", nil)
}
```

---

## âœ… 3. ãƒ¢ãƒƒã‚¯ã¨ãƒ†ã‚¹ãƒˆä¾‹

### ğŸ“„ test/mock\_goal\_repository.go

```go
package test

import "go-record-app2025/internal/model"

type MockGoalRepo struct{}

func (m *MockGoalRepo) GetAll() ([]model.Goal, error) {
	return []model.Goal{
		{ID: 1, Title: "ãƒ¢ãƒƒã‚¯ç›®æ¨™", Status: "NotStarted"},
		{ID: 2, Title: "ã‚‚ã†1ã¤ã®ãƒ¢ãƒƒã‚¯", Status: "ActiveGoals"},
	}, nil
}
```

---

### ğŸ“„ service/goal\_service\_test.go

```go
package service_test

import (
	"testing"

	"github.com/stretchr/testify/assert"
	"go-record-app2025/internal/service"
	"go-record-app2025/internal/test"
)

func TestGetGoals(t *testing.T) {
	mockRepo := &test.MockGoalRepo{}
	svc := service.NewGoalService(mockRepo)

	goals, err := svc.GetGoals()

	assert.NoError(t, err)
	assert.Len(t, goals, 2)
	assert.Equal(t, "ãƒ¢ãƒƒã‚¯ç›®æ¨™", goals[0].Title)
}
```

---

## âœ… å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

* PostgreSQLãƒ‰ãƒ©ã‚¤ãƒ

  ```bash
  go get github.com/lib/pq
  ```
* ãƒ†ã‚¹ãƒˆç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆãŠã™ã™ã‚ï¼‰

  ```bash
  go get github.com/stretchr/testify
  ```

---

## ğŸ”š ã¾ã¨ã‚

| å±¤           | å½¹å‰²                                     |
| ------------ | ---------------------------------------- |
| `repository` | DBã«æ¥ç¶šã™ã‚‹å®Ÿè£…ã¨ã€æŠ½è±¡ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ |
| `service`    | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå®Ÿè£…ã¨ãƒ†ã‚¹ãƒˆã®åˆ†é›¢ç‚¹ï¼‰ |
| `handler`    | HTTPå±¤ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæç”»ã‚„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°   |
| `test`       | ãƒ¢ãƒƒã‚¯ã‚„ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ                   |

---

å¿…è¦ã§ã‚ã‚Œã°ã€\*\*ãƒ¢ãƒƒã‚¯ç”Ÿæˆãƒ„ãƒ¼ãƒ«ï¼ˆGoMockã‚„Mockeryï¼‰**ã®ä½¿ã„æ–¹ã‚‚ãŠä¼ãˆã§ãã¾ã™ã€‚
æ¬¡ã¯ã€**ã€Œç›®æ¨™ã®æ–°è¦ä½œæˆæ©Ÿèƒ½ã€\*\*ã‚’è¿½åŠ ã—ã¦ã€POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆå¯¾å¿œã—ã¦ã„ãã®ãŒãŠã™ã™ã‚ã§ã™ï¼
